<!DOCTYPE html>
<html>
<head>
    <title>TAIC Report Viewer</title>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.js"></script>
    
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.css" />

    <!-- Custom Stylesheets-->
    <link rel="stylesheet" type="text/css" href="/static/css/main.css">

    <!-- Custom JavaScript-->
    <script type="text/javascript" src="/static/js/main.js"></script>
</head>
<body>
    <h1>TAIC Report Viewer</h1>
    <form method="post" id="searchForm" action="/search">
        <div class="row">
            <input type="text" id="searchQuery" name="searchQuery" placeholder="Enter search query">
            <button type="button" id="advancedSearchBtn">Search settings</button>
            <button type="reset" id="resetBtn">Reset</button>    
            <input type="submit" value="Search">
        </div>
        <div id="advancedSearch">
            <div class="row">
                <div id="transportModes" class="advancedSearchSection">
                    <h5>Transport Modes</h5>
                    <label><input type="checkbox" name="includeModeAviation" checked>Aviation</label>
                    <label><input type="checkbox" name="includeModeRail" checked>Rail</label>
                    <label><input type="checkbox" name="includeModeMarine" checked>Marine</label>
                </div>
                <div id="reportYearRange" class="advancedSearchSection">
                    <h5>Report year range</h5>
                    <div id="yearSlider"></div>
                </div>
            </div>
        </div>
        
    </form>

    <br>
    <br>
    <!-- Loading sign with spinning animation -->
    <div id="loading"><br><br>Loading...</div>

    <!-- Placeholder for displaying search results -->
    <div id="searchResults" style="display: none;">
        <h2>Search Results</h2>
        <div id="resultButtons" class="resultsSection">
            <button type="button" id="downloadCSVBtn_results" >Download CSV</button>
        </div>
        <div id="searchResultsSummary" class="resultsSection">
            <h3>Summary of Search (AI generated)</h3>
            <div id="searchResultsSummaryText"></div>
        </div>
        <div class="resultsSection">
            <h3>Relevant safety issues</h3>
            <div id="searchResultsTableWrapper"></div>
        </div>
    </div>

    <div id="modalContainer">
        <div id="modalContent">
            <div id="modalHeader">
                <h3 id="modalTitle"></h3>
                <span class="close" id="closeModal">&times;</span>
            </div>
            <div id="modalText" class="scrollable-content">
            </div>
        </div>
    </div>
    <footer>
        <p>Created by <a href="https://github.com/1jamesthompson1">James Thompson</a> for the <a href="https://www.taic.org.nz">New Zealand Transport Accident Investigation Commision.</a></p>
        <p>Contact directed to <a href="mailto:1jamesthompson1@gmail.com">1jamesthompson1@gmail.com</a>, project is being developed openly on <a href="https://github.com/1jamesthompson1/TAIC-report-summary">https://github.com/1jamesthompson1/TAIC-report-summary</a></p>
    </footer>
</body>
</html>
